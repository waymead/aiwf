extends ../layout

block main
	#content
		.mdl-grid
			.mdl-cell.mdl-cell--12-col
				h2.mdl-color-text--primary= list.name
				
			.mdl-cell.mdl-cell--12-col
				if numGifts === 0
					h6 No-one has added any gifts to yout list yet. 
						a(href="/lists/share/#{list.id}") Share your list
						span &nbsp;again.
				else
					each person, name in gifts
						h6= name
						table.mdl-data-table.mdl-js-data-table.mdl-shadow--4dp
							each gift in person
								tr
									td.mdl-data-table__cell--non-numeric
										if gift.image
											img.list-image(src="#{gift.image}")
										else 
											img.list-image(src="http://lorempixel.com/100/100/abstract/")
										if gift.url
											a.mdl-color-text--primary(href="#{gift.url}/#{gift.name}", target="_new")= gift.name
										else
											span.mdl-color-text--primary(href="#{gift.url}/#{gift.name}", target="_new")= gift.name
										if gift.notes
											span.mdl-layout--large-screen-only &nbsp;(#{gift.notes})
											
									td
										if gift.boughtBy === user.email
											a.mdl-button.mdl-js-button.mdl-button--accent.mdl-layout--large-screen-only Bought
											a.mdl-button.mdl-js-button.mdl-button--fab.mdl-button--mini-fab.mdl-button--gray(href="/gifts/replace/#{gift.id}")
												i.material-icons.md-light remove
										else if typeof(gift.boughtBy) == 'undefined'
											a.mdl-button.mdl-js-button.mdl-button--primary.mdl-layout--large-screen-only Available
											a.mdl-button.mdl-js-button.mdl-button--fab.mdl-button--mini-fab.mdl-button--primary.mdl-color-text--white(href="/gifts/buy/#{gift.id}")
												i.material-icons.md-light add
										else 
											span.mdl-button.mdl-js-button.mdl-button--gray Unavailable									
